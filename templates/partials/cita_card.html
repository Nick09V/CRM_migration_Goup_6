<div class="bg-white dark:bg-background-dark p-6 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-lg font-bold flex items-center gap-2">
            <span class="material-symbols-outlined text-primary">event_upcoming</span>
            Mi Cita
        </h2>
        {% if cita %}
        <span class="px-3 py-1 bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 text-xs font-bold rounded-full uppercase tracking-wider">{{ cita.get_estado_display }}</span>
        {% endif %}
    </div>

    {% if cita %}
    <div class="space-y-4 mb-8">
        <div class="flex items-start gap-3">
            <span class="material-symbols-outlined text-gray-400">calendar_month</span>
            <div>
                <p class="text-xs text-gray-500 uppercase font-semibold">Fecha y Hora</p>
                <p class="text-base font-medium text-[#111318] dark:text-white">{{ cita.inicio|date:"d \d\e F, Y" }}</p>
                <p class="text-sm text-gray-600 dark:text-gray-400">{{ cita.inicio|date:"H:i" }} hrs</p>
            </div>
        </div>
        <div class="flex items-start gap-3">
            <span class="material-symbols-outlined text-gray-400">person</span>
            <div>
                <p class="text-xs text-gray-500 uppercase font-semibold">Agente Asignado</p>
                <p class="text-sm text-[#111318] dark:text-white">{{ cita.agente.nombre }}</p>
            </div>
        </div>
    </div>

    <div class="flex flex-col gap-3">
        <button hx-get="{% url 'mostrar_calendario' %}" 
                hx-target="#calendar-modal"
                class="w-full bg-primary text-white py-2.5 px-4 rounded-lg font-bold text-sm hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
            <span class="material-symbols-outlined text-lg">edit_calendar</span>
            Reprogramar Cita
        </button>
        
        <div class="flex flex-col gap-2">
            {% if cita.puede_cancelar %}
                <button hx-get="{% url 'confirmar_cancelacion' cita.id %}" 
                        hx-target="#cancel-confirm-modal"
                        class="w-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 py-2.5 px-4 rounded-lg font-bold text-sm hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors">
                    Cancelar Cita
                </button>
            {% else %}
                <button class="w-full bg-gray-100 dark:bg-gray-800 text-gray-400 border border-gray-200 dark:border-gray-700 py-2.5 px-4 rounded-lg font-bold text-sm cursor-not-allowed opacity-70" disabled>
                    Cancelar Cita
                </button>
                <div class="flex items-center gap-2 px-1 text-red-600 dark:text-red-400">
                    <span class="material-symbols-outlined text-sm">report_problem</span>
                    <p class="text-xs font-semibold">No es posible cancelar con menos de 3 días de anticipación</p>
                </div>
            {% endif %}
        </div>
    </div>
    {% else %}
    <div class="text-center py-8">
        <span class="material-symbols-outlined text-gray-300 mb-4" style="font-size: 64px;">event_busy</span>
        <p class="text-gray-400 italic text-sm mb-4">No tienes citas pendientes.</p>
        <button hx-get="{% url 'mostrar_calendario' %}" 
                hx-target="#calendar-modal"
                class="px-6 py-2.5 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-bold flex items-center justify-center gap-2 mx-auto">
            <span class="material-symbols-outlined text-lg">add_circle</span>
            Agendar Cita
        </button>
    </div>
    {% endif %}
</div>
